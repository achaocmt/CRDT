%!TEX root = draft.tex

\section{Definitions and Proofs of Section \ref{sec:reference implementation}}
\label{sec:definitions and proofs of section reference implementation}



\subsection{Proof of Lemma \ref{lemma:executions of reference implementation are eventual consistent}}
\label{subsec:proof of lemma executions of reference implementation are eventual consistent}

{\noindent \bf Lemma \ref{lemma:executions of reference implementation are eventual consistent}}: $\forall t \in \llbracket RImp(Spec) \rrbracket$, $poSet(t)$ is eventual consistent w.r.t $Spec$. 

\begin {proof} 

Assume $RImp(Spec) = (Q,\Sigma,vis,,q_0,li,gi,\rightarrow,livReq)$, $t = \alpha_1, \ldots, $ and $\exists q_1,\ldots$, such that $q_0 {\xrightarrow{\alpha_1}} q_1 {\xrightarrow{\alpha_2}} \ldots$, and $livReq(t) = \textit{true}$.

We prove this lemma by consider the four requirements individually: 

\begin{itemize}
\setlength{\itemsep}{0.5pt}
\item[-] $\textit{GIpf}$: $gi$ is defined as the union of local interpretation of each replica. Recall that for 

From the construction of $\llbracket RImp(Spec) \rrbracket$, it is easy to see that $\forall q_i = (uO_i,ro_i,del_i)$ and its corresponding visibility relation $vis_i$, $\forall o \in uO_i$, $vis^{-1}(o)$ is finite.
    

\item[-] $\textit{THINAIR}$: $eb \cup ro$ is acyclic.

\item[-] $\textit{RVAL}$: $\forall o = (m,a,b,rid,oid) \in Os$, $li_{\Sigma(M,D)}(o) \in Spec(m,a,b)$. Here $li_{\Sigma(M,D)}(o)$ is obtained from $li(o)$ by labeling each $(m',a',b',rid',oid')$ with $(m,a,b)$.

\item[-] $\textit{EVENTUAL}$: For any finite prefix $P$ of the poset $(Os,gi)$, $\{ o \vert o \in Os, P \npreceq li(o) \}$ is finite.
\end{itemize}




According to definition of $li$, it has same point as $vis$ and has less or equal transition than $vis$. From the construction of $\llbracket RImp(Spec) \rrbracket$ and initial state of $RImp(Spec)$, it is easy to see that for

\begin{itemize}
\setlength{\itemsep}{0.5pt}
\item[-] $\textit{GIpf}$: $\forall o \in Os$, $<^{-1}_{gi}(o)$ is finite.

\item[-] $\textit{THINAIR}$: $eb \cup ro$ is acyclic.

\item[-] $\textit{RVAL}$: $\forall o = (m,a,b,rid,oid) \in Os$, $li_{\Sigma(M,D)}(o) \in Spec(m,a,b)$. Here $li_{\Sigma(M,D)}(o)$ is obtained from $li(o)$ by labeling each $(m',a',b',rid',oid')$ with $(m,a,b)$.

\item[-] $\textit{EVENTUAL}$: For any finite prefix $P$ of the poset $(Os,gi)$, $\{ o \vert o \in Os, P \npreceq li(o) \}$ is finite.
\end{itemize}

This completes the proof of this lemma. $\qed$
\end {proof}



